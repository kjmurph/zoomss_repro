% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/zoomss_model.R
\name{zoomss_model}
\alias{zoomss_model}
\title{Main ZooMSS model function for complete simulations}
\usage{
zoomss_model(
  input_params,
  Groups = NULL,
  isave = 1,
  fishing_params = NULL,
  save_catch_by_size = FALSE
)
}
\arguments{
\item{input_params}{Data frame containing model parameters and environmental time series.
Must include columns: time (time vector in years), sst (sea surface temperature),
and chl (chlorophyll). Can optionally include cellID for spatial data. The time step (dt)
and maximum time (tmax) are automatically calculated from the time vector. Can be created using createInputParams().}

\item{Groups}{Data frame defining functional groups with their biological parameters.
Must include columns defining species characteristics, size ranges, and feeding parameters.
If NULL, uses default ZooMSS functional groups. Can be obtained/customized using
getGroups().}

\item{isave}{Save frequency in time steps (default: 10)}

\item{fishing_params}{Optional list specifying dynamic fishing mortality. If NULL (default),
uses static fishing mortality from Groups$Fmort. If provided, must contain:
\itemize{
\item effort: numeric vector of fishing effort time series (length = nrow(input_params))
\item catchability: named numeric vector of catchability coefficients (q) for each group
\item selectivity: list with named elements for each group, each containing:
\itemize{
\item type: "knife_edge", "logistic", or "custom"
\item params: list of parameters (e.g., list(w_min = 1.0) for knife_edge)
\item log_scale: TRUE (default) if params are in log10 grams
}
}}

\item{save_catch_by_size}{Logical, if TRUE saves size-resolved catch (nsave x ngrps x ngrid),
if FALSE (default) saves only total catch by group (nsave x ngrps). Size-resolved catch
provides detailed information about catch size structure but increases memory usage.}
}
\value{
Complete ZooMSS model results object containing:
\itemize{
\item param: Model parameters and environmental forcing data
\item time: Time values corresponding to saved results (accounting for isave)
\item abundance: Abundance time series (time x groups x size classes)
\item growth: Growth rate time series
\item mortality: Mortality rate time series
\item diet: Diet composition time series
\item Additional model structure and kernel data
}
}
\description{
This is the main wrapper function that orchestrates a complete ZooMSS
model simulation from parameter setup through model execution to output processing.
}
\details{
Run Complete ZooMSS Model Simulation

This function coordinates the entire ZooMSS modeling workflow:
\enumerate{
\item Validates that environmental time series data is provided
\item Sets up model parameters using the Groups data and input parameters
\item Initializes the model structure and feeding kernels
\item Runs the model forward in time with dynamic environmental forcing
\item Processes outputs by averaging the final 50\% of the simulation
\item Returns organized results including abundances, diets, growth, and mortality
}

This is the primary entry point for
running ZooMSS simulations with environmental forcing.
}
\examples{
\dontrun{
# Basic usage with default groups
env_data <- createEnviroData(10, 0.01)
input_params <- createInputParams(env_data$time, env_data$sst, env_data$chl)
results <- zoomss_model(input_params, isave = 50)

# Using custom groups
Groups <- getGroups()  # Get default groups
Groups$W0[1] <- -12.5          # Modify a parameter
results <- zoomss_model(input_params, Groups, isave = 100)

# Loading groups from file
custom_groups <- getGroups(source = "file", file = "my_groups.csv")
results <- zoomss_model(input_params, custom_groups)
}

}
